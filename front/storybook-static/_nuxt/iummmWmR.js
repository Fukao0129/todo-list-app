import{a as z,b as H,_ as ie,u as me,c as ce}from"./BHjTxwOp.js";import{_ as _e}from"./CoeiA8Mv.js";import{_ as pe}from"./Dv_JhIDu.js";import{d as A,U as h,O as w,x as b,B as a,T as Y,v as U,P as K,z as C,y as T,C as Te,E as ge,L as R,S as fe,s as e,D as ve,r as E,H as P,W as Se,A as be,ae as F,aq as q,I as Oe,c as xe,F as L,Q as X,R as Ee}from"./BhoS_8da.js";import{_ as he}from"./DlAUqK2U.js";import{a as Q,b as W,P as j,c as ye,_ as Ve,S as Ce}from"./CEIgd1XK.js";import{_ as Ue}from"./CADcuymq.js";import{_ as Ae}from"./CxP1Mprn.js";import{D as S,f as Be,C as Ie,A as Ne,_ as we}from"./DYmndyt5.js";import{_ as De,a as $e}from"./B-u76wg8.js";import{u as G}from"./CmDf-aGC.js";import{u as Me,B as V}from"./O1MeW6Fz.js";import{u as Le}from"./Dl3A-_vs.js";import"./CE40bwFq.js";import"./PPVm8Dsz.js";import"./BhLkZZtO.js";const Pe={class:"search-input__wrapper relative"},J=A({__name:"SearchInput",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(_){const r=h(_,"modelValue");return(n,g)=>{const u=pe,i=z;return b(),w("div",Pe,[a(u,{icon:"search",color:"secondary",class:"absolute left-2 top-1/2 transform -translate-y-1/2"}),a(i,{modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=O=>r.value=O),placeholder:"キーワードで検索"},null,8,["modelValue"])])}}}),ke=Object.assign(he(J,[["__scopeId","data-v-14c2c1e7"]]),{__name:"SearchInput"});J.__docgenInfo={exportName:"default",displayName:"SearchInput",description:"",tags:{},sourceFiles:["/var/www/html/app/components/SearchInput.vue"]};const Re={class:"flex items-center gap-1"},Fe=["aria-checked"],Z=A({__name:"BaseToggle",props:Y({label:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(_){const r=h(_,"modelValue"),n=()=>{r.value=!r.value};return(g,u)=>{const i=Ue;return b(),w("div",Re,[_.label?(b(),U(i,{key:0,size:"small",color:"secondary",tag:"label"},{default:T(()=>[Te(ge(_.label),1)]),_:1})):K("",!0),C("div",{class:R(["cursor-pointer relative rounded-2xl bg-neutral-subtle w-9 h-5 transition-colors",{"bg-primary is-on":r.value}]),tabindex:"0",role:"switch","aria-checked":r.value,onClick:n,onKeydown:fe(n,["enter"])},[C("div",{class:R(["w-4 h-4 bg-white rounded-full absolute top-0.5 left-0.5 transition-all duration-200",{"left-[calc(100%-1rem-2px)]":r.value}])},null,2)],42,Fe)])}}}),qe=Object.assign(Z,{__name:"BaseToggle"});Z.__docgenInfo={exportName:"default",displayName:"BaseToggle",description:"",tags:{},props:[{name:"label",required:!1,type:{name:"string"}}],sourceFiles:["/var/www/html/app/components/Base/BaseToggle.vue"]};const ee=A({__name:"SearchCard",props:{q:{},qModifiers:{},selectedIndex:{},selectedIndexModifiers:{},isToggleOn:{type:Boolean},isToggleOnModifiers:{}},emits:["update:q","update:selectedIndex","update:isToggleOn"],setup(_){const r=h(_,"q"),n=h(_,"selectedIndex"),g=h(_,"isToggleOn");return(u,i)=>{const O=ke,s=Q,p=qe,m=Ae;return b(),U(m,{class:"grid md:flex items-center gap-4 md:gap-8 p-4"},{default:T(()=>[a(O,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=o=>r.value=o),class:"flex-auto"},null,8,["modelValue"]),a(s,{modelValue:n.value,"onUpdate:modelValue":i[1]||(i[1]=o=>n.value=o),options:("SORT_OPTIONS"in u?u.SORT_OPTIONS:e(W)).map((o,v)=>({id:v,name:o.label}))},null,8,["modelValue","options"]),a(p,{modelValue:g.value,"onUpdate:modelValue":i[2]||(i[2]=o=>g.value=o),label:`${("DEFAULT_STATUSES"in u?u.DEFAULT_STATUSES:e(S)).COMPLETED.label}を除く`,class:"flex-shrink-0"},null,8,["modelValue","label"])]),_:1})}}}),Xe=Object.assign(ee,{__name:"SearchCard"});ee.__docgenInfo={exportName:"default",displayName:"SearchCard",description:"",tags:{},sourceFiles:["/var/www/html/app/components/SearchCard.vue"]};const oe=A({__name:"AddTodoModal",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:Y(["submit"],["update:modelValue"]),setup(_,{emit:r}){const n=h(_,"modelValue"),g=r,{validationErrors:u,clearErrorMessages:i}=G(),{user:O}=ve(),s=E({title:"",description:"",priority:j.LOW.value,user_id:O.id,status_id:S.NOT_STARTED.value,due_date:"",reminder_at:""}),p=()=>{g("submit",s.value)};return P(n,m=>{i(),s.value.title="",m&&Se(()=>{Be("#add-todo-modal__input")})}),(m,o)=>{const v=z,f=ie,B=ye,D=Q,I=H,$=De;return b(),U($,{modelValue:n.value,"onUpdate:modelValue":o[6]||(o[6]=d=>n.value=d),title:"Todoを追加する"},{content:T(()=>[C("form",{onSubmit:be(p,["prevent"])},[a(f,{label:"タイトル"},{default:T(()=>[a(v,{modelValue:e(s).title,"onUpdate:modelValue":o[0]||(o[0]=d=>e(s).title=d),"error-message":e(u)["add-todo.title"],id:"add-todo-modal__input"},null,8,["modelValue","error-message"])]),_:1}),a(f,{label:"説明"},{default:T(()=>[a(B,{modelValue:e(s).description,"onUpdate:modelValue":o[1]||(o[1]=d=>e(s).description=d)},null,8,["modelValue"])]),_:1}),a(f,{label:"優先度"},{default:T(()=>[a(D,{modelValue:e(s).priority,"onUpdate:modelValue":o[2]||(o[2]=d=>e(s).priority=d),options:Object.values("PRIORITY"in m?m.PRIORITY:e(j)).map(d=>({id:d.value,name:d.label}))},null,8,["modelValue","options"])]),_:1}),a(f,{label:"リマインド"},{default:T(()=>[F(C("input",{"onUpdate:modelValue":o[3]||(o[3]=d=>e(s).reminder_at=d),type:"datetime-local",name:"reminder_at"},null,512),[[q,e(s).reminder_at]])]),_:1}),a(f,{label:"期日","has-border":!1},{default:T(()=>[F(C("input",{"onUpdate:modelValue":o[4]||(o[4]=d=>e(s).due_date=d),type:"datetime-local",name:"due_date"},null,512),[[q,e(s).due_date]])]),_:1})],32)]),footer:T(()=>[a(I,{text:"CANCEL_BUTTON_TEXT"in m?m.CANCEL_BUTTON_TEXT:e(Ie),color:"secondary",onClick:o[5]||(o[5]=d=>n.value=!1)},null,8,["text"]),a(I,{text:"ADD_BUTTON_TEXT"in m?m.ADD_BUTTON_TEXT:e(Ne),onClick:p},null,8,["text"])]),_:1},8,["modelValue"])}}}),je=Object.assign(oe,{__name:"AddTodoModal"});oe.__docgenInfo={exportName:"default",displayName:"AddTodoModal",description:"",tags:{},events:[{name:"submit",type:{names:["TSTypeQuery"]}}],sourceFiles:["/var/www/html/app/components/AddTodoModal.vue"]};const ze=A({__name:"[[category]]",setup(_){const r=Oe(),{showSnackbar:n}=Me(),{useCustomFetch:g,callApi:u}=Le(),{setErrorMessages:i}=G(),O=r.params.category,s=E(!1),p=E({sort:"due_date",direction:Ce.ASC.value,q:"",is_trashed:V.FALSE,is_today:V.FALSE}),{data:m,pending:o,refresh:v}=g("/todos",{query:p.value}),f=E(!0),B=xe(()=>f.value?m.value?.filter(l=>l.status_id!==S.COMPLETED.value)||[]:m.value||[]),{data:D}=g("/statuses"),I=l=>{u("/todos",{method:"POST",body:l}).then(()=>{s.value=!1,n("Todoを追加しました"),v()}).catch(t=>{i(t.data.errorMessage,"add-todo")})},$=l=>{u(`/todos/${l.id}`,{method:"PUT",body:l}).then(()=>{n("Todoを更新しました"),v()}).catch(t=>{i(t.data.errorMessage,"update-todo")})},d=l=>{const t={...l,is_trashed:V.TRUE};u(`/todos/${t.id}`,{method:"PUT",body:t}).then(()=>{n("ゴミ箱に移動しました"),v()}).catch(x=>{n(x.message,"error")})},te=(l,t)=>{const x={...t,status_id:l?S.COMPLETED.value:S.NOT_STARTED.value};u(`/todos/${x.id}`,{method:"PUT",body:x}).then(()=>{v(),n(l?`Todoを${S.COMPLETED.label}にしました`:`Todoを${S.NOT_STARTED.label}に戻しました`)}).catch(M=>{n(M.message,"error")})},ae=()=>{u("/todos/trash-completed",{method:"PUT"}).then(()=>{n(`${S.COMPLETED.label}のTodoをすべてゴミ箱に移動しました`),v()}).catch(l=>{n(l.message,"error")})},N=E(0);P(N,l=>{const t=W[l];t&&(p.value.sort=t.sort,p.value.direction=t.direction)});const y=E("");return P(()=>O,l=>{l==="today"?(p.value.is_today=V.TRUE,y.value="今日のTodo"):(p.value.is_trashed=V.FALSE,y.value="すべてのTodo"),me({title:y.value})},{immediate:!0}),(l,t)=>{const x=H,M=_e,ne=Xe,se=Ve,le=we,de=ce,re=$e,ue=je;return b(),w(X,null,[a(de,null,{default:T(()=>[a(M,{title:e(y),"data-length":e(m)?.length,breadcrumb:e(O)?[{label:e(y)}]:void 0},{tools:T(()=>[e(f)?K("",!0):(b(),U(x,{key:0,text:`${("DEFAULT_STATUSES"in l?l.DEFAULT_STATUSES:e(S)).COMPLETED.label}をすべてゴミ箱に移動`,"left-icon":"trash",onClick:ae},null,8,["text"]))]),_:1},8,["title","data-length","breadcrumb"]),a(ne,{q:e(p).q,"onUpdate:q":t[0]||(t[0]=c=>e(p).q=c),"selected-index":e(N),"onUpdate:selectedIndex":t[1]||(t[1]=c=>L(N)?N.value=c:null),"is-toggle-on":e(f),"onUpdate:isToggleOn":t[2]||(t[2]=c=>L(f)?f.value=c:null)},null,8,["q","selected-index","is-toggle-on"]),a(le,{"data-length":e(B)?.length||0,pending:e(o)},{default:T(()=>[(b(!0),w(X,null,Ee(e(B),c=>(b(),U(se,{key:c.id,todo:c,statuses:e(D),onOnClickSubmit:$,onOnCheck:k=>te(k,c),onOnTrash:k=>d(c)},null,8,["todo","statuses","onOnCheck","onOnTrash"]))),128))]),_:1},8,["data-length","pending"])]),_:1}),a(re,{onClick:t[3]||(t[3]=c=>s.value=!0)}),a(ue,{modelValue:e(s),"onUpdate:modelValue":t[4]||(t[4]=c=>L(s)?s.value=c:null),onSubmit:I},null,8,["modelValue"])],64)}}});ze.__docgenInfo={exportName:"default",displayName:"[[category]]",description:"",tags:{},sourceFiles:["/var/www/html/app/pages/[[category]].vue"]};export{ze as default};
