import{_ as S}from"./CoeiA8Mv.js";import{u as N,_ as T,a as D,b as M,c as P}from"./BHjTxwOp.js";import{_ as $}from"./CADcuymq.js";import{_ as k}from"./CxP1Mprn.js";import{d as A,D as C,r as I,v as F,x as H,y as s,B as e,z as m,A as g,s as a,C as L,E as z}from"./BhoS_8da.js";import{l as G}from"./BFXwtwrJ.js";import{u as O}from"./O1MeW6Fz.js";import{u as j}from"./Dl3A-_vs.js";import{u as q}from"./CmDf-aGC.js";import"./CE40bwFq.js";import"./Dv_JhIDu.js";import"./PPVm8Dsz.js";import"./Cpj98o6Y.js";const _="ユーザー設定",J=A({__name:"index",setup(K){N({title:_});const{showSnackbar:i}=O(),{callApi:c}=j(),{validationErrors:u,setErrorMessages:f,clearErrorMessages:w}=q(),{user:V,updateUser:h}=C(),n=G.cloneDeep(V),y=()=>{w(),c(`/users/${n.id}`,{method:"PUT",body:n}).then(async()=>{await h(),i("ユーザー情報を更新しました")}).catch(d=>{f(d.data.errorMessage,"update-user")})},r=I({current_password:"",new_password:"",new_password_confirmation:""}),U=()=>{w(),c("/password/change",{method:"POST",body:r.value}).then(()=>{i("パスワードを更新しました"),r.value={current_password:"",new_password:"",new_password_confirmation:""}}).catch(d=>{f(d.data.errorMessage,"update-password")})};return(d,o)=>{const v=S,p=D,l=T,B=$,b=M,x=k,E=P;return H(),F(E,{"has-sidebar":!1},{default:s(()=>[e(v,{title:_,breadcrumb:[{label:_}],"has-data-length":!1},null,8,["breadcrumb"]),o[5]||(o[5]=m("h2",null,"ユーザー情報",-1)),e(x,null,{default:s(()=>[m("form",{onSubmit:g(y,["prevent"])},[e(l,{label:"名前"},{default:s(()=>[e(p,{modelValue:a(n).name,"onUpdate:modelValue":o[0]||(o[0]=t=>a(n).name=t),placeholder:"名前を入力してください","error-message":a(u)["update-user.name"]},null,8,["modelValue","error-message"])]),_:1}),e(l,{label:"メールアドレス","has-border":!1},{default:s(()=>[e(B,null,{default:s(()=>[L(z(a(n).email),1)]),_:1})]),_:1}),e(b,{text:"更新する"})],32)]),_:1}),o[6]||(o[6]=m("h2",null,"パスワード変更",-1)),e(x,null,{default:s(()=>[m("form",{onSubmit:o[4]||(o[4]=g(t=>U(),["prevent"]))},[e(l,{label:"現在のパスワード"},{default:s(()=>[e(p,{modelValue:a(r).current_password,"onUpdate:modelValue":o[1]||(o[1]=t=>a(r).current_password=t),type:"password",placeholder:"現在のパスワードを入力してください","error-message":a(u)["update-password.current_password"]},null,8,["modelValue","error-message"])]),_:1}),e(l,{label:"新しいパスワード"},{default:s(()=>[e(p,{modelValue:a(r).new_password,"onUpdate:modelValue":o[2]||(o[2]=t=>a(r).new_password=t),type:"password",placeholder:"新しいパスワードを入力してください","error-message":a(u)["update-password.new_password"]},null,8,["modelValue","error-message"])]),_:1}),e(l,{label:"新しいパスワード（確認）","has-border":!1},{default:s(()=>[e(p,{modelValue:a(r).new_password_confirmation,"onUpdate:modelValue":o[3]||(o[3]=t=>a(r).new_password_confirmation=t),type:"password",placeholder:"新しいパスワードを再度入力してください"},null,8,["modelValue"])]),_:1}),e(b,{text:"パスワードを変更する"})],32)]),_:1})]),_:1})}}});J.__docgenInfo={exportName:"default",displayName:"profile",description:"",tags:{},sourceFiles:["/var/www/html/app/pages/profile/index.vue"]};export{J as default};
