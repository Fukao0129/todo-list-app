import{u as C,b as L,c as O}from"./BHjTxwOp.js";import{_ as A}from"./CoeiA8Mv.js";import{_ as N,S as w}from"./CEIgd1XK.js";import{_ as D,E as l}from"./DYmndyt5.js";import{d as S,r as F,v as m,x as n,y as _,B as h,s as t,P as f,O as g,Q as P,R as I,z as $}from"./BhoS_8da.js";import{u as U,B as c}from"./O1MeW6Fz.js";import{u as V}from"./Dl3A-_vs.js";import"./CADcuymq.js";import"./Dv_JhIDu.js";import"./CE40bwFq.js";import"./CxP1Mprn.js";import"./CmDf-aGC.js";import"./PPVm8Dsz.js";const H=""+new URL("empty-trash.D-D_muXO.svg",import.meta.url).href,X={key:0},d="ゴミ箱",z=S({__name:"index",setup(G){C({title:d});const{showSnackbar:s}=U(),{useCustomFetch:x,callApi:i}=V(),E=F({sort:"due_date",direction:w.ASC.value,is_trashed:c.TRUE,is_today:c.FALSE}),{data:e,pending:p,refresh:u}=x("/todos",{params:E.value}),y=a=>{const o={...a,is_trashed:c.FALSE};i(`/todos/${a.id}`,{method:"PUT",body:o}).then(()=>{s("Todoをゴミ箱から戻しました"),u()}).catch(()=>{s(l,"error")})},T=()=>{const a=e.value?.map(o=>o.id)||[];i("/todos",{method:"DELETE",body:{todo_ids:a}}).then(()=>{s("ゴミ箱を空にしました"),u()}).catch(()=>{s(l,"error")})};return(a,o)=>{const R=L,b=A,k=N,B=D,v=O;return n(),m(v,null,{default:_(()=>[h(b,{title:d,"data-length":t(e)?.length,breadcrumb:[{label:d}]},{tools:_(()=>[t(e)?.length>0?(n(),m(R,{key:0,text:"ゴミ箱を空にする",onClick:T})):f("",!0)]),_:1},8,["data-length","breadcrumb"]),h(B,{"data-length":t(e)?.length||0,pending:t(p),"no-data-text":"ゴミ箱は空っぽです。気持ちいいですね！"},{default:_(()=>[(n(!0),g(P,null,I(t(e),r=>(n(),m(k,{key:r.id,todo:r,"is-trash":"",onOnRestore:Q=>y(r)},null,8,["todo","onOnRestore"]))),128)),t(e)?.length===0&&!t(p)?(n(),g("div",X,[...o[0]||(o[0]=[$("img",{src:H,alt:"ゴミ箱は空っぽ",class:"max-w-40 mx-auto my-4"},null,-1)])])):f("",!0)]),_:1},8,["data-length","pending"])]),_:1})}}});z.__docgenInfo={exportName:"default",displayName:"trash",description:"",tags:{},sourceFiles:["/var/www/html/app/pages/trash/index.vue"]};export{z as default};
